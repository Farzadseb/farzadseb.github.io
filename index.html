<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>A1 English Dictionary</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<style>
body{
  margin:0;
  font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto;
  background:#f6f8ff;
  color:#111;
  padding:20px;
}

h1{
  text-align:center;
  font-size:2.2rem;
  margin-bottom:14px;
}

.search-box{
  max-width:520px;
  margin:0 auto 20px;
  display:flex;
}

.search-box input{
  flex:1;
  font-size:1.4rem;
  padding:14px 18px;
  border-radius:16px;
  border:2px solid #6b8cff;
  outline:none;
}

.card{
  max-width:520px;
  margin:0 auto 16px;
  background:#fff;
  border-radius:18px;
  padding:16px 18px;
  box-shadow:0 6px 18px rgba(0,0,0,.08);
}

.word-row{
  display:flex;
  align-items:center;
  justify-content:space-between;
}

.word{
  font-size:2rem;
  font-weight:700;
  color:#4f6cff;
}

.speaker{
  font-size:1.8rem;
  cursor:pointer;
}

.section{
  margin-top:14px;
}

.section-title{
  font-size:1.1rem;
  opacity:.7;
  margin-bottom:6px;
}

.box{
  background:#eef2ff;
  border-radius:14px;
  padding:12px 14px;
  font-size:1.2rem;
}

.fa{
  direction:rtl;
  text-align:right;
}

.list{
  padding-left:18px;
}

.list li{
  margin-bottom:6px;
  font-size:1.15rem;
}
</style>
</head>

<body>

<h1>üìò A1 English Dictionary</h1>

<div class="search-box">
  <input id="search" placeholder="Type a word and press Enter">
</div>

<div id="result"></div>

<script>
let data = {};
let lastSpoken = "";

fetch("pdcs_a1.json")
  .then(r=>r.json())
  .then(j=>data = j.words || j);

function speak(text){
  lastSpoken = text;
  speechSynthesis.cancel();
  const u = new SpeechSynthesisUtterance(text);
  u.lang="en-US";
  u.rate=0.8;
  speechSynthesis.speak(u);
}

document.getElementById("search").addEventListener("keydown",e=>{
  if(e.key==="Enter") search();
});

function search(){
  const w = document.getElementById("search").value.trim().toLowerCase();
  const r = document.getElementById("result");
  r.innerHTML = "";

  if(!data[w]){
    r.innerHTML = "<div class='card'>‚ùå Not found</div>";
    return;
  }

  const d = data[w];
  speak(w);

  let html = `
  <div class="card">
    <div class="word-row">
      <div class="word">${w}</div>
      <div class="speaker" onclick="speak('${w}')">üîä</div>
    </div>
  </div>
  `;

  if(d.def){
    html+=`
    <div class="card">
      <div class="section-title">English Definition</div>
      <div class="box">${d.def}</div>
    </div>`;
  }

  if(d.fa){
    html+=`
    <div class="card">
      <div class="section-title">Persian Meaning</div>
      <div class="box fa">${d.fa}</div>
    </div>`;
  }

  if(d.example){
    html+=`
    <div class="card">
      <div class="section-title">Example</div>
      <div class="box">${d.example.en}</div>
      <div class="box fa" style="margin-top:6px">${d.example.fa}</div>
    </div>`;
  }

  if(d.collocations && d.collocations.length){
    html+=`
    <div class="card">
      <div class="section-title">Collocations</div>
      <ul class="list">
        ${d.collocations.map(c=>`<li>${c.en} ‚Äî <span class="fa">${c.fa}</span></li>`).join("")}
      </ul>
    </div>`;
  }

  if(d.phrases && d.phrases.length){
    html+=`
    <div class="card">
      <div class="section-title">Phrases</div>
      <ul class="list">
        ${d.phrases.map(p=>`<li>${p.en} ‚Äî <span class="fa">${p.fa}</span></li>`).join("")}
      </ul>
    </div>`;
  }

  if(d.phrasal_verbs && d.phrasal_verbs.length){
    html+=`
    <div class="card">
      <div class="section-title">Phrasal Verbs</div>
      <ul class="list">
        ${d.phrasal_verbs.map(p=>`<li>${p.en} ‚Äî <span class="fa">${p.fa}</span></li>`).join("")}
      </ul>
    </div>`;
  }

  r.innerHTML = html;
}
</script>

</body>
</html>
